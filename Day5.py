# Day 5
# 시계열 데이터의 특징을 말할 수 있게
# 왜 랜덤 섞기*(shuffle)*가 안 되는지 설명 가능
# 아주 기본적인 예측 코드 이해

# 시계열 한 줄 정의(이게 제일 중요)
# "시계열 데이터는 시간 순서가 의미를 가지는 데이터다."
# ex) 주가, 매출, 온도, 센서 데이터

# 시계열 데이터의 핵심 특징 3가지

# 1) 순서가 중요하다
# 과거 -> 현재 -> 미래
# 순서 바뀌면 의미 없음
# X 랜덤 셔플
# O 시간 순 유지

# 2) 과거로 미래를 예측한다
# 미래 값은 과거 데이터만 사용
# 미래 데이터를 학습에 쓰면 X (데이터 누수)

# 3) 패턴이 반복될 수 있다
# 추세(trend)
# 계절성(seasonality)
# 노이즈(noise)

# 문제 1 - 이동 평균(가장 기본)
# 다음 시계열 데이터에 대해 3일 이동 평균을 계산하시오.
data = [10, 12, 14, 13, 15, 18]

# 접근 사고 과정
# 연속된 3개 값의 평균
# 앞에서부터 계산
# 처음 2개는 계산 불가 -> NaN

import pandas as pd

# 시계열 데이터
data = pd.Series([10, 12, 14, 13, 15, 18]) 

# 3일 이동 평균 계산
moving_avg = data.rolling(window=3).mean()

print(moving_avg)

# 출력 해석
# 0    NaN
# 1    NaN
# 2   12.0  -> (10+12+14)/3
# 3   13.0  -> (12+14+13)/3
# 4   14.0  -> (14+13+15)/3
# 5   15.333333 -> (13+15+18)/3
# dtype: float64
# 앞의 NaN은 계산할 데이터가 부족해서 정상

# 왜 이동 평균을 쓰나?
# "노이즈를 줄이고 전체적인 흐름을 보기 위해서이다."

# 시험용 한 줄:
# "이동 평균은 단기 변동을 완화하고 추세를 파악하기 위해 사용합니다."

# 시계열 train/test 분리

# X 잘못된 방법
# train_test_split(data, shuffle=True)

# O 올바른 방법
# train = data[:4]
# test = data[4:]

# "시계열 데이터는 시간 순서가 중요해서 랜덤 셔플 없이 과거와 미래 기준으로 분리합니다."

# 시게열에서 자주 나오는 질문

# Q: 왜 랜덤 셔플을 하면 안되나요?
# A: "미래 정보가 학습에 섞여 데이터 누수가 발생하기 때문입니다."

# Q: 복잡한 모델(LSTM, ARIMA)을 꼭 써야 하나요?
# A: "기본 문제에서는 이동 평균 같은 단순 방법으로도 충분합니다."

# 셀프 체크

# 1) 시계열 데이터의 가장 큰 특징은?
# "시간 순서가 의미를 가지는 데이터라서 순서를 유지해야 한다."

# 2) 왜 shuffle 하면 안 되나?
# "시간 순서가 섞이면 미래 정보가 학습에 들어가 데이터 누수(look-ahead bias)가 생기고, 실제 예측 상황을 반영하지 못하기 때문이다."

# 3)이동 평균은 왜 쓰나?
# "단기 변동(노이즈)을 줄이고 전체적인 추세나 흐름을 보기 위해 사용한다."

# 최종 요약
# "시계열은 순서가 중요하고, 과거로 미래를 예측하며, 이동 평균은 흐름을 보기 위해 사용한다."